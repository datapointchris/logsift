# Pre-commit hook output patterns
# Patterns to capture error and warning output from pre-commit hooks
# Organized by tool category for maintainability
#
# This file contains patterns for detecting issues in pre-commit hook output,
# enabling logsift to filter verbose pre-commit runs for actionable errors.
#
# Pattern testing methodology:
# 1. Created violation files that trigger specific hook failures
# 2. Ran hooks in isolation to capture output format
# 3. Verified patterns match real hook output
# 4. Each pattern has corresponding test in test_precommit_patterns.py

# ============================================================================
# Shell Script Linting - shellcheck
# ============================================================================

[[patterns]]
name = "shellcheck_file_location"
regex = "^In (.+?) line (\\d+):"
severity = "error"
description = "Shellcheck issue location header"
tags = ["pre-commit", "shellcheck", "shell", "location"]

[[patterns]]
name = "shellcheck_error"
regex = "SC(\\d+) \\(error\\): (.+)"
severity = "error"
description = "Shellcheck error with SC code"
tags = ["pre-commit", "shellcheck", "shell", "error"]
suggestion = "Fix shell script issue according to shellcheck guidance"

[[patterns]]
name = "shellcheck_warning"
regex = "SC(\\d+) \\(warning\\): (.+)"
severity = "warning"
description = "Shellcheck warning with SC code"
tags = ["pre-commit", "shellcheck", "shell", "warning"]
suggestion = "Address shell script warning according to shellcheck guidance"

[[patterns]]
name = "shellcheck_info"
regex = "SC(\\d+) \\(info\\): (.+)"
severity = "warning"
description = "Shellcheck info/style suggestion"
tags = ["pre-commit", "shellcheck", "shell", "info", "style"]

[[patterns]]
name = "shellcheck_note"
regex = "SC(\\d+) \\(note\\): (.+)"
severity = "warning"
description = "Shellcheck informational note"
tags = ["pre-commit", "shellcheck", "shell", "note"]

# ============================================================================
# Python Refactoring Suggestions - refurb
# ============================================================================

[[patterns]]
name = "refurb_suggestion"
regex = "^(.+?):(\\d+):(\\d+) \\[FURB(\\d+)\\]: (.+)"
severity = "warning"
description = "Refurb refactoring suggestion"
tags = ["pre-commit", "refurb", "python", "refactoring", "style"]
suggestion = "Apply refurb suggestion to modernize Python code"

# ============================================================================
# Python Type Checking - mypy
# ============================================================================

[[patterns]]
name = "mypy_error"
regex = "^(.+?):(\\d+): error: (.+?)  \\[(.+?)\\]"
severity = "error"
description = "Mypy type checking error"
tags = ["pre-commit", "mypy", "python", "type-checking", "error"]
suggestion = "Fix type annotation or type incompatibility"

[[patterns]]
name = "mypy_error_no_code"
regex = "^(.+?):(\\d+): error: (.+)$"
severity = "error"
description = "Mypy type checking error (no error code)"
tags = ["pre-commit", "mypy", "python", "type-checking", "error"]

[[patterns]]
name = "mypy_note"
regex = "^(.+?):(\\d+): note: (.+)"
severity = "warning"
description = "Mypy informational note"
tags = ["pre-commit", "mypy", "python", "type-checking", "note"]

[[patterns]]
name = "mypy_warning"
regex = "^(.+?):(\\d+): warning: (.+)"
severity = "warning"
description = "Mypy warning"
tags = ["pre-commit", "mypy", "python", "type-checking", "warning"]

# ============================================================================
# Python Linting - ruff
# ============================================================================

[[patterns]]
name = "ruff_error"
regex = "^(.+?):(\\d+):(\\d+): ([A-Z]\\d+) (.+)"
severity = "error"
description = "Ruff linting error"
tags = ["pre-commit", "ruff", "python", "linting", "error"]
suggestion = "Fix code style or logic issue according to ruff guidance"

[[patterns]]
name = "ruff_error_simple"
regex = "^(.+?):(\\d+):(\\d+): ([A-Z]\\d+)"
severity = "error"
description = "Ruff linting error (code only)"
tags = ["pre-commit", "ruff", "python", "linting", "error"]

# ============================================================================
# Spell Checking - codespell
# ============================================================================

[[patterns]]
name = "codespell_typo"
regex = "^(.+?):(\\d+): (.+?) ==> (.+)"
severity = "warning"
description = "Codespell spelling error"
tags = ["pre-commit", "codespell", "spelling", "typo"]
suggestion = "Fix spelling mistake"
